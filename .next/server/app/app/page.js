(()=>{var e={};e.id=466,e.ids=[466],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4471:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var n=s(260),a=s(8203),r=s(5155),i=s.n(r),o=s(7292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["app",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1064)),"/Users/nipun/Economicaly Released Project/lifesight2/app/app/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2530)),"/Users/nipun/Economicaly Released Project/lifesight2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,1129)),"/Users/nipun/Economicaly Released Project/lifesight2/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/Users/nipun/Economicaly Released Project/lifesight2/app/app/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/app/page",pathname:"/app",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6137:(e,t,s)=>{Promise.resolve().then(s.bind(s,1064))},6761:(e,t,s)=>{Promise.resolve().then(s.bind(s,1128))},1128:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eg});var n,a,r,i,o,l,c,d=s(5512),u=s(8009),h=s(7021),p=s(7643),m=s(5409),f=s(1680);let g=(0,f.A)("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]),x=(0,f.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),y=(0,f.A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),E=(0,f.A)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var v=s(4209);let N=(0,f.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(n||(n={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(a||(a={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(r||(r={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(i||(i={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.OTHER="OTHER"}(o||(o={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(l||(l={}));class S extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class j extends S{constructor(e,t){super(e),this.response=t}}!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(c||(c={}));class _{constructor(e,t,s,n){this.model=e,this.task=t,this.apiKey=s,this.stream=n}toString(){let e=`https://generativelanguage.googleapis.com/v1/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}async function C(e,t,s){let n;try{if(!(n=await fetch(e.toString(),Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.timeout)>=0){let s=new AbortController,n=s.signal;setTimeout(()=>s.abort(),e.timeout),t.signal=n}return t}(s)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":"genai-js/0.2.1","x-goog-api-key":e.apiKey},body:t}))).ok){let e="";try{let t=await n.json();e=t.error.message,t.error.details&&(e+=` ${JSON.stringify(t.error.details)}`)}catch(e){}throw Error(`[${n.status} ${n.statusText}] ${e}`)}}catch(s){let t=new S(`Error fetching from ${e.toString()}: ${s.message}`);throw t.stack=s.stack,t}return n}function A(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){var t,s,n,a;if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),O(e.candidates[0]))throw new j(`${I(e)}`,e);return(null===(a=null===(n=null===(s=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===s?void 0:s.parts)||void 0===n?void 0:n[0])||void 0===a?void 0:a.text)?e.candidates[0].content.parts[0].text:""}if(e.promptFeedback)throw new j(`Text not available. ${I(e)}`,e);return""},e}let T=[o.RECITATION,o.SAFETY];function O(e){return!!e.finishReason&&T.includes(e.finishReason)}function I(e){var t,s,n;let a="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)a+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(a+=` due to ${e.promptFeedback.blockReason}`),(null===(s=e.promptFeedback)||void 0===s?void 0:s.blockReasonMessage)&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null===(n=e.candidates)||void 0===n?void 0:n[0]){let t=e.candidates[0];O(t)&&(a+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(a+=`: ${t.finishMessage}`))}return a}function w(e){return this instanceof w?(this.v=e,this):new w(e)}"function"==typeof SuppressedError&&SuppressedError;let b=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function R(e){let t=[],s=e.getReader();for(;;){let{done:e,value:n}=await s.read();if(e)return A(function(e){let t=e[e.length-1],s={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e)if(t.candidates)for(let e of t.candidates){let t=e.index;if(s.candidates||(s.candidates=[]),s.candidates[t]||(s.candidates[t]={index:e.index}),s.candidates[t].citationMetadata=e.citationMetadata,s.candidates[t].finishReason=e.finishReason,s.candidates[t].finishMessage=e.finishMessage,s.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts)for(let n of(s.candidates[t].content||(s.candidates[t].content={role:e.content.role||"user",parts:[{text:""}]}),e.content.parts))n.text&&(s.candidates[t].content.parts[0].text+=n.text)}return s}(t));t.push(n)}}async function M(e,t,s,n){let a=new _(t,c.STREAM_GENERATE_CONTENT,e,!0);return function(e){let[t,s]=(function(e){let t=e.getReader();return new ReadableStream({start(e){let s="";return function n(){return t.read().then(({value:t,done:a})=>{let r;if(a){if(s.trim()){e.error(new S("Failed to parse stream"));return}e.close();return}let i=(s+=t).match(b);for(;i;){try{r=JSON.parse(i[1])}catch(t){e.error(new S(`Error parsing JSON response: "${i[1]}"`));return}e.enqueue(r),i=(s=s.substring(i[0].length)).match(b)}return n()})}()}})})(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(e){return function(e,t,s){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,a=s.apply(e,t||[]),r=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){a[e]&&(n[e]=function(t){return new Promise(function(s,n){r.push([e,t,s,n])>1||o(e,t)})})}function o(e,t){try{var s;(s=a[e](t)).value instanceof w?Promise.resolve(s.value.v).then(l,c):d(r[0][2],s)}catch(e){d(r[0][3],e)}}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),r.shift(),r.length&&o(r[0][0],r[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:s}=yield w(t.read());if(s)break;yield yield w(A(e))}})}(t),response:R(s)}}(await C(a,JSON.stringify(s),n))}async function k(e,t,s,n){let a=new _(t,c.GENERATE_CONTENT,e,!1),r=await C(a,JSON.stringify(s),n);return{response:A(await r.json())}}function P(e,t){let s=[];if("string"==typeof e)s=[{text:e}];else for(let t of e)"string"==typeof t?s.push({text:t}):s.push(t);return{role:t,parts:s}}function L(e){return e.contents?e:{contents:[P(e,"user")]}}let D="SILENT_ERROR";class H{constructor(e,t,s,n){this.model=t,this.params=s,this.requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==s?void 0:s.history)&&(this._history=s.history.map(e=>{if(!e.role)throw Error("Missing role for history item: "+JSON.stringify(e));return P(e.parts,e.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var t,s;let n;await this._sendPromise;let a=P(e,"user"),r={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(s=this.params)||void 0===s?void 0:s.generationConfig,contents:[...this._history,a]};return this._sendPromise=this._sendPromise.then(()=>k(this._apiKey,this.model,r,this.requestOptions)).then(e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(a);let s=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(s)}else{let t=I(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}n=e}),await this._sendPromise,n}async sendMessageStream(e){var t,s;await this._sendPromise;let n=P(e,"user"),a={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(s=this.params)||void 0===s?void 0:s.generationConfig,contents:[...this._history,n]},r=M(this._apiKey,this.model,a,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>r).catch(e=>{throw Error(D)}).then(e=>e.response).then(e=>{if(e.candidates&&e.candidates.length>0){this._history.push(n);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=I(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==D&&console.error(e)}),r}}async function G(e,t,s,n){let a=new _(t,c.COUNT_TOKENS,e,!1);return(await C(a,JSON.stringify(Object.assign(Object.assign({},s),{model:t})),n)).json()}async function U(e,t,s,n){let a=new _(t,c.EMBED_CONTENT,e,!1);return(await C(a,JSON.stringify(s),n)).json()}async function $(e,t,s,n){let a=new _(t,c.BATCH_EMBED_CONTENTS,e,!1),r=s.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await C(a,JSON.stringify({requests:r}),n)).json()}class K{constructor(e,t,s){this.apiKey=e,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.requestOptions=s||{}}async generateContent(e){let t=L(e);return k(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)}async generateContentStream(e){let t=L(e);return M(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},t),this.requestOptions)}startChat(e){return new H(this.apiKey,this.model,e,this.requestOptions)}async countTokens(e){let t=L(e);return G(this.apiKey,this.model,t)}async embedContent(e){let t="string"==typeof e||Array.isArray(e)?{content:P(e,"user")}:e;return U(this.apiKey,this.model,t)}async batchEmbedContents(e){return $(this.apiKey,this.model,e,this.requestOptions)}}class F{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new S("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new K(this.apiKey,e,t)}}var B=s(6050);async function Y(e,t){try{let s=process.env.NEXT_PUBLIC_VITE_GEMINI_API_KEY;if(!s)throw Error("Google Cloud API key is not configured");let n=new F(s).getGenerativeModel({model:"gemini-1.5-flash"}),a=[{text:B.VE.replace("{input}",e)}];t&&(console.log("Image base64 data:",t.substring(0,20)+"..."),t.length>0?a.push({inlineData:{data:t,mimeType:"image/jpeg"}}):console.warn("Image data is empty, not sending image to Gemini API."));let r=(await n.generateContent({contents:[{role:"user",parts:a}]})).response;if(!r.text())throw Error("No text response from Gemini API");return{text:r.text()}}catch(e){return console.error("Error calling Gemini API:",e),{text:"",error:"Failed to get response from AI. Please try again."}}}let q=0,V=new Map,z=e=>{if(V.has(e))return;let t=setTimeout(()=>{V.delete(e),Z({type:"REMOVE_TOAST",toastId:e})},1e6);V.set(e,t)},J=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?z(s):e.toasts.forEach(e=>{z(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},X=[],W={toasts:[]};function Z(e){W=J(W,e),X.forEach(e=>{e(W)})}function Q({...e}){let t=(q=(q+1)%Number.MAX_VALUE).toString(),s=()=>Z({type:"DISMISS_TOAST",toastId:t});return Z({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>Z({type:"UPDATE_TOAST",toast:{...e,id:t}})}}let ee=(0,f.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var et=s(691);function es({response:e,isLoading:t,onResponseEnd:s}){(0,u.useRef)(null);let{fontSize:n,accentColor:a}=(0,et.t)();return t?(0,d.jsxs)(p.Zp,{className:"p-4 flex items-center justify-center",children:[(0,d.jsx)(ee,{className:"h-6 w-6 animate-spin",style:{color:a}}),(0,d.jsx)("span",{className:"ml-2",style:{fontSize:`${n/16}rem`},children:"Processing your request..."})]}):e?(0,d.jsx)(p.Zp,{className:"p-4 space-y-2",children:(0,d.jsx)("p",{className:"text-lg",style:{fontSize:`${n/16}rem`},children:e})}):null}var en=s(2944),ea=s(9462),er=s(1844),ei=s(6275),eo=s(8531),el=s.n(eo),ec=s(8686);function ed(){let[e,t]=(0,u.useState)(!1),[s,n]=(0,u.useState)(!1),[a,r]=(0,u.useState)(""),[i,o]=(0,u.useState)(""),[l,c]=(0,u.useState)({cameras:[],mics:[]}),[f,S]=(0,u.useState)(!1),[j,_]=(0,u.useState)(!1);(0,ec.useSearchParams)();let[C,A]=(0,u.useState)(""),T=(0,u.useRef)(null),O=(0,u.useRef)(null),{isLoading:I,response:w,getResponse:b}=function(){let[e,t]=(0,u.useState)(!1),[s,n]=(0,u.useState)(""),{toast:a}=function(){let[e,t]=u.useState(W);return u.useEffect(()=>(X.push(t),()=>{let e=X.indexOf(t);e>-1&&X.splice(e,1)}),[e]),{...e,toast:Q,dismiss:e=>Z({type:"DISMISS_TOAST",toastId:e})}}();return{isLoading:e,response:s,getResponse:async(e,s)=>{t(!0);try{let t=await Y(e,s);if(t.error)return a({title:"Error",description:t.error,variant:"destructive"}),null;return n(t.text),t.text}catch(e){return a({title:"Error",description:"Failed to get AI response. Please try again.",variant:"destructive"}),null}finally{t(!1)}}}}(),{language:R}=(0,en.o)(),M=(0,u.useRef)(null);(0,u.useRef)(null);let{fontSize:k,lineHeight:P,letterSpacing:L,accentColor:D}=(0,et.t)(),[H,G]=(0,u.useState)(!0),{speak:U,stop:$,isPlaying:K}=function(e={}){let{onStart:t,onEnd:s,onError:n}=e,[a,r]=(0,u.useState)(!1),i=(0,u.useRef)(null);return{speak:(0,u.useCallback)(e=>{console.error("Speech synthesis is not supported in this browser.")},[t,s,n]),stop:(0,u.useCallback)(()=>{i.current&&(window.speechSynthesis.cancel(),i.current=null,r(!1))},[]),isPlaying:a}}({onStart:()=>{s&&(B(!1),S(!0))},onEnd:()=>{f&&(B(!0),S(!1))},onError:e=>{console.error("Speech synthesis error:",e),f&&(B(!0),S(!1))}}),F=async(s=!1)=>{if(!H)try{if((e||s)&&(O.current&&O.current.getTracks().forEach(e=>e.stop()),T.current&&(T.current.srcObject=null)),!e||s){let e=await navigator.mediaDevices.getUserMedia({video:{deviceId:a}});T.current&&(T.current.srcObject=e),O.current=e}t(!e||s)}catch(e){console.error("Error toggling camera:",e)}},B=async(e=!1)=>{if(!H)try{if(s&&!e&&(O.current&&O.current.getTracks().forEach(e=>{"audio"===e.kind&&e.stop()}),M.current&&M.current.stop()),!s||e){let e=await navigator.mediaDevices.getUserMedia({audio:{deviceId:i}});O.current=e,V()}n(!s||e)}catch(e){console.error("Error toggling microphone:",e)}},q=async()=>{if(!T.current)return null;let e=document.createElement("canvas");e.width=T.current.videoWidth,e.height=T.current.videoHeight;let t=e.getContext("2d");return t?(t.drawImage(T.current,0,0),e.toDataURL("image/jpeg").split(",")[1]):null},V=()=>{console.error("Speech recognition is not supported in this browser.")},z=(0,u.useCallback)(async()=>{w&&U(w)},[w,U]);(0,u.useCallback)(async e=>e.includes("start camera")?(await F(!0),U("Camera started"),!0):e.includes("stop camera")?(await F(!1),U("Camera stopped"),!0):e.includes("start mic")?(await B(!0),U("Microphone started"),!0):e.includes("stop mic")?(await $(),await B(!1),U("Microphone stopped"),!0):!!(e.includes("repeat")||e.includes("respeak"))&&(await z(),!0),[U,F,B,$,z]);let J=async()=>{if(l.cameras.length>1){let e=(l.cameras.findIndex(e=>e.deviceId===a)+1)%(l.cameras.length+1);e===l.cameras.length?(r(""),await F(!1)):(r(l.cameras[e].deviceId),await F(!0))}else await F()},ee=async()=>{if(l.mics.length>1){let e=(l.mics.findIndex(e=>e.deviceId===i)+1)%(l.mics.length+1);e===l.mics.length?(o(""),await B(!1)):(o(l.mics[e].deviceId),await B(!0))}else await B()},eo=async()=>{if(H||!C.trim())return;let t=e?await q():void 0;await b(C,"string"==typeof t?t:void 0),A("")};return(0,d.jsxs)("div",{className:"flex w-100 flex-col space-y-4 my-4",style:{fontSize:`${k/16}rem`,lineHeight:P,letterSpacing:`${L}px`},children:[(0,d.jsx)("div",{className:"relative h-[50vh] shrink-0",children:(0,d.jsxs)(p.Zp,{className:"h-full w-full overflow-hidden",children:[(0,d.jsx)("video",{ref:T,autoPlay:!0,playsInline:!0,muted:!0,className:(0,ea.cn)("w-full h-full object-cover",!e&&"hidden")}),!e&&(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:(0,d.jsx)(g,{className:"w-12 h-12 text-muted-foreground"})})]})}),(0,d.jsx)("div",{className:"h-[15vh] overflow-y-auto",children:(0,d.jsx)(p.Zp,{className:"h-full p-4",children:w?(0,d.jsx)(es,{response:w,isLoading:I,onResponseEnd:()=>{s&&B()}}):(0,d.jsxs)("div",{className:"text-gray-500",children:["Known Bugs ",(0,d.jsx)("br",{})," • Speech output not working ",(0,d.jsx)("br",{})," • Some UI elements aren't mobile friendly and out of place"]})})}),(0,d.jsx)(ei.O,{open:j,onOpenChange:_}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 w-100 xl:flex-row",children:[(0,d.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,d.jsxs)(er.m_,{children:[(0,d.jsx)(er.k$,{asChild:!0,children:(0,d.jsxs)(h.$,{variant:e?"default":"outline",onClick:async()=>{await J(),U(e?"Camera stopped":"Camera started")},className:"flex-1 relative min-h-[48px]",children:[(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[e?(0,d.jsx)(x,{className:"mr-2"}):(0,d.jsx)(g,{className:"mr-2"}),(0,d.jsx)("span",{children:e?"Stop Camera":"Start Camera"})]}),(()=>{let t=e?"Live":"Off";if(l.cameras.length>1){let s=l.cameras.findIndex(e=>e.deviceId===a);t=e?`Live ${s+1} of ${l.cameras.length}`:`Off ${s+1} of ${l.cameras.length}`}else 1===l.cameras.length&&(t=e?"Live (only 1 device)":"Off (only 1 device)");return e?(0,d.jsxs)("div",{className:"absolute left-3 top-2 flex items-center gap-1",children:[(0,d.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),(0,d.jsx)("span",{className:"text-s text-green-500",children:t})]}):(0,d.jsxs)("div",{className:"absolute left-3 top-2 flex items-center gap-1",children:[(0,d.jsx)("div",{className:"h-2 w-2 rounded-full bg-red-500"}),(0,d.jsx)("span",{className:"text-s text-red-500",children:t})]})})()]})}),(0,d.jsx)(er.ZI,{side:"top",align:"center",children:l.cameras.length>1?"Click to toggle camera, cycles through devices and off":"Click to toggle camera"})]}),(0,d.jsxs)(er.m_,{children:[(0,d.jsx)(er.k$,{asChild:!0,children:(0,d.jsxs)(h.$,{variant:s?"default":"outline",onClick:async()=>{await ee(),U(s?"Microphone stopped":"Microphone started")},className:"flex-1 relative min-h-[48px]",children:[(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[s?(0,d.jsx)(y,{className:"mr-2"}):(0,d.jsx)(E,{className:"mr-2"}),(0,d.jsx)("span",{children:s?"Stop Mic":"Start Mic"})]}),(()=>{let e=s?"Listening":"Off";if(l.mics.length>1){let t=l.mics.findIndex(e=>e.deviceId===i);e=s?`Listening ${t+1} of ${l.mics.length}`:`Off ${t+1} of ${l.mics.length}`}else 1===l.mics.length&&(e=s?"Listening (only 1 device)":"Off (only 1 device)");return K?(0,d.jsxs)("div",{className:"absolute left-3 top-2 flex items-center gap-1",children:[(0,d.jsx)("div",{className:"h-2 w-2 rounded-full bg-yellow-500 animate-pulse"}),(0,d.jsx)("span",{className:"text-s text-yellow-500",children:"Paused"})]}):s?(0,d.jsxs)("div",{className:"absolute left-3 top-2 flex items-center gap-1",children:[(0,d.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),(0,d.jsx)("span",{className:"text-s text-green-500",children:e})]}):(0,d.jsxs)("div",{className:"absolute left-3 top-2 flex items-center gap-1",children:[(0,d.jsx)("div",{className:"h-2 w-2 rounded-full bg-red-500"}),(0,d.jsx)("span",{className:"text-s text-red-500",children:e})]})})()]})}),(0,d.jsxs)(er.ZI,{side:"top",align:"center",children:[l.mics.length>1?"Click to toggle microphone, cycles through devices and off":"Click to toggle microphone",(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{children:"Available voice commands:"}),(0,d.jsxs)("ul",{className:"list-disc pl-4",children:[(0,d.jsx)("li",{children:"start camera"}),(0,d.jsx)("li",{children:"stop camera"}),(0,d.jsx)("li",{children:"start mic"}),(0,d.jsx)("li",{children:"stop mic"}),(0,d.jsx)("li",{children:"repeat"}),(0,d.jsx)("li",{children:"respeak"})]})]})]})]}),(0,d.jsx)(h.$,{asChild:!0,variant:"secondary",className:"flex-1 relative min-h-[48px]",children:(0,d.jsxs)(el(),{href:"/call-assistant",children:[(0,d.jsx)(v.A,{className:"mr-2"}),(0,d.jsx)("span",{children:"Call Assistance"})]})})]}),(0,d.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,d.jsx)(m.p,{value:C,onChange:e=>A(e.target.value),placeholder:"Type your question or command...",onKeyDown:e=>{"Enter"===e.key&&eo()},className:"flex-1"}),(0,d.jsx)(h.$,{className:"w-10 h-10",variant:"accent",onClick:eo,style:{backgroundColor:D},children:(0,d.jsx)(N,{className:"w-10 h-10"})})]})]})]})}var eu=s(1965);let eh=(0,f.A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ep=(0,f.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function em({onComplete:e}){let{fontSize:t,accentColor:s}=(0,et.t)();return(0,d.jsx)(eu.lG,{open:!0,onOpenChange:e,children:(0,d.jsxs)(eu.Cf,{className:"sm:max-w-[425px]",style:{fontSize:`${t/16}rem`},children:[(0,d.jsxs)(eu.c7,{children:[(0,d.jsx)(eu.L3,{children:"Welcome to Lifesight"}),(0,d.jsx)(eu.rr,{children:"Let's get you started with using our AI-powered assistant."})]}),(0,d.jsxs)("div",{className:"py-4 space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(x,{className:"w-5 h-5 mt-0.5",style:{color:s}}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium",children:"Camera Access"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"We'll use your camera to help understand your surroundings"})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(y,{className:"w-5 h-5 mt-0.5",style:{color:s}}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium",children:"Voice Commands"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Speak naturally to interact with the assistant"})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(eh,{className:"w-5 h-5 mt-0.5",style:{color:s}}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-medium",children:"Text Input"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Type your questions if you prefer text communication"})]})]})]}),(0,d.jsx)(eu.Es,{children:(0,d.jsxs)(h.$,{onClick:e,className:"w-full",style:{backgroundColor:s},children:[(0,d.jsx)(ep,{className:"w-4 h-4 mr-2"}),"Get Started"]})})]})})}var ef=s(3197);function eg(){let[e,t]=(0,ef.M)("hasSeenOnboarding",!1),[s,n]=(0,u.useState)(!1);return s?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("main",{className:(0,ea.cn)("bg-background overflow-hidden"),children:(0,d.jsxs)(er.Bc,{children:[(0,d.jsx)(ed,{}),!e&&(0,d.jsx)(em,{onComplete:()=>t(!0)})]})})}):null}},5409:(e,t,s)=>{"use strict";s.d(t,{p:()=>o});var n=s(5512),a=s(8009),r=s(9462),i=s(691);let o=a.forwardRef(({className:e,type:t,onKeyPress:s,...a},o)=>{let{fontSize:l}=(0,i.t)();return(0,n.jsx)("input",{type:t,className:(0,r.cn)("flex w-full rounded-md border border-input bg-background px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sm:h-10 h-10",e),ref:o,style:{fontSize:`${l/16*.875}rem`},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),a.onKeyDown&&a.onKeyDown(e))},...a})});o.displayName="Input"},4209:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(1680).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},1064:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});let n=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nipun/Economicaly Released Project/lifesight2/app/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nipun/Economicaly Released Project/lifesight2/app/app/page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[408,284],()=>s(4471));module.exports=n})();